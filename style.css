/* ======================================================= */
/* === style.css - V4.0.2 Final Flexbox Architecture   === */
/* ======================================================= */

/* === 1. Theme & Layout Control Panel === */
:root {
  --bar-height: 45px;
  --drawer-expanded-height: 26vh;
  --button-height-core: 35px;
  --button-height-shortcut: 35px;
  --button-height-action: 35px;
  --button-height-close: 28px;
  --core-button-count: 4;
  --core-button-gap: 8px;

  /* ... (Color variables remain the same) ... */
  --body-background: #ffffff;
  --app-container-background: #f4f4f4;
  --panel-background: #f8f9fa;
  --accent-color-main: #029000;
  --accent-color-dark: #004d00;
  --info-color: #D3BF00;
  --danger-color: #dc3545;
  --text-color-blue: #2c4a63;
  --text-color-dark: #000000;
  --text-color-light: #ffffff;
  --text-color-soft: #999999;
  --button-background-default: #ffffff;
  --button-background-hover: #f1f3f5;
  --button-background-active: #e9ecef;
  --panel-border-color: #dee2e6;
  --panel-shadow: 0 -2px 5px rgba(0, 0, 0, 0.05);
  --border-color-soft: #eeeeee;
  --border-color-medium: #cccccc;
  --button-shadow-default: 0 2px 4px rgba(0, 0, 0, 0.075);
  --button-shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.12);
  --button-shadow-active: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* === 2. Global & Main Layout === */
html, body {
  background-color: var(--body-background);
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--text-color-dark);
}
* {
  box-sizing: border-box;
}
.app-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: var(--app-container-background);
}
.content {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
  padding-bottom: var(--bar-height);
}
.content iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* === 3. Loading Bar (No Changes) === */
.top-loader {
  position: absolute; top: 0; left: 0; width: 100%; height: 3px; z-index: 10; overflow: hidden; background-color: transparent; transform: scaleY(0); transform-origin: top; transition: transform 0.3s ease; }
.top-loader.show {
  transform: scaleY(1); }
.top-loader::before {
  content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--accent-color-main); animation: loading-bar-animation 1.5s infinite ease-in-out; }
@keyframes loading-bar-animation {
  0% { transform: translateX(-100%); } 50% { transform: translateX(0%); } 100% { transform: translateX(100%); } }

/* === 4. Bottom Navigation Bar (No Changes) === */
.bottom-bar {
  position: fixed; bottom: 0; left: 0; right: 0; background-color: var(--panel-background); border-top: 1px solid var(--panel-border-color); box-shadow: var(--panel-shadow); z-index: 50; height: var(--bar-height); transition: height 0.3s ease-in-out; overflow: hidden; }
.bottom-bar.is-open {
  height: var(--drawer-expanded-height); 
  
}
.visible-bar {
  display: flex; align-items: center; height: var(--bar-height); padding: 0 10px; gap: 8px; }

.expandable-drawer {
  /* Use the SAME new variable in the calculation */
  height: calc(var(--drawer-expanded-height) - var(--bar-height));
  overflow-y: auto;
  padding: 10px;
  overflow-x: hidden; /* Keep this for stability */
}

/* === Shortcut Button Count === */
.shortcut-grid {
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
  gap: 8px; }

/* === 5. Buttons (NEW FLEXBOX ARCHITECTURE) === */
.core-buttons {
  flex-grow: 1;
  display: flex; /* Back to Flexbox */
  gap: var(--core-button-gap);
  align-items: center;
  padding: 5px 0;
  overflow-x: auto; /* Re-enabled scrolling */
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.core-buttons::-webkit-scrollbar {
  display: none;
}

.tab-item {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin: 0;
  padding: 0 8px;
  border-radius: 7px;
  border: 1px solid var(--panel-border-color);
  background: var(--button-background-default);
  color: var(--text-color-soft);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  box-shadow: var(--button-shadow-default);
  transition: all 0.2s ease-in-out;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.core-button {
  height: var(--button-height-core);
  /* The magic formula: each button takes up a fraction of the space */
  /* We subtract the gap to make the calculation more accurate */
  flex-basis: calc((100% / var(--core-button-count)) - var(--core-button-gap));
  flex-grow: 1; /* Allow button to grow slightly to fill tiny pixel gaps */
}
.shortcut-button {
  height: var(--button-height-shortcut);
  color: var(--text-color-blue);
}

.tab-item:hover, #toggle-drawer-btn:hover, #manage-shortcuts-btn:hover {
  background: var(--button-background-hover); box-shadow: var(--button-shadow-hover); }
  

.tab-item.active,
#toggle-drawer-btn.active,
#manage-shortcuts-btn.active {
  background: var(--button-background-active);
  color: var(--accent-color-main);
  border-color: #ced4da;
  box-shadow: var(--button-shadow-active);
  font-weight: 700;
}
  
#toggle-drawer-btn, #manage-shortcuts-btn {
  display: flex; align-items: center; justify-content: center; flex-shrink: 0; width: var(--button-height-action); height: var(--button-height-action); min-width: var(--button-height-action); padding: 0; margin: 0; border-radius: 7px; background: var(--button-background-default); border: 1px solid var(--panel-border-color); color: var(--text-color-blue); cursor: pointer; -webkit-tap-highlight-color: transparent; box-shadow: var(--button-shadow-default); transition: all 0.2s ease-in-out; }
#toggle-drawer-btn svg path {
  stroke: currentColor; stroke-width: 2; }
.bottom-bar.is-open #toggle-drawer-btn {
  transform: rotate(180deg); }

/* === 6. Shortcut Management Modal (No Changes) === */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 100; display: flex; justify-content: center; align-items: center; visibility: hidden; opacity: 0; transition: opacity 0.3s, visibility 0.3s; }
.modal-overlay.show { visibility: visible; opacity: 1; }
.modal-content {
  background-color: var(--panel-background); border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; display: flex; flex-direction: column; transform: scale(0.9); transition: transform 0.3s; }
.modal-overlay.show .modal-content { transform: scale(1); }
.modal-header {
  padding: 15px 20px; border-bottom: 1px solid var(--border-color-soft); display: flex; justify-content: space-between; align-items: center; }
.modal-header h2 {
  margin: 0; font-size: 20px; color: var(--text-color-blue); }
.close-btn {
  display: flex; align-items: center; justify-content: center; width: var(--button-height-close); height: var(--button-height-close); font-size: 28px; font-weight: bold; cursor: pointer; color: var(--danger-color); background: var(--button-background-default); border: 1px solid var(--panel-border-color); border-radius: 7px; box-shadow: var(--button-shadow-default); transition: all 0.2s ease-in-out; -webkit-tap-highlight-color: transparent; }
.close-btn:hover {
  background: var(--button-background-hover); box-shadow: var(--button-shadow-hover); color: var(--text-color-dark); }
.modal-body { padding: 20px; overflow-y: auto; }
.modal-body h3 {
  font-size: 15px; margin-top: 0; margin-bottom: 15px; color: var(--text-color-blue); }
.shortcut-form-container { margin-bottom: 30px; }
.shortcut-form-container input {
  width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color-medium); border-radius: 4px; font-size: 12px; }
.shortcut-form-container button {
  width: 100%; padding: 9px; font-size: 15px; font-weight: 700; cursor: pointer; -webkit-tap-highlight-color: transparent; background: var(--button-background-default); border: 1px solid var(--panel-border-color); color: var(--accent-color-main); border-radius: 7px; box-shadow: 0 6px 10px rgba(0,0,0,0.11); transition: all 0.2s ease-in-out; }
.shortcut-form-container button:hover {
  background: rgba(2, 144, 0, 0.1); box-shadow: 0 6px 10px rgba(2, 144, 0, 0.1); }
.shortcut-form-container button:active {
  background: var(--button-background-active); box-shadow: var(--button-shadow-active); }
#shortcuts-list { list-style-type: none; padding: 0; margin: 0; }
#shortcuts-list li {
  display: flex; justify-content: space-between; align-items: center; padding: 10px 8px; border-bottom: 1px solid var(--border-color-soft); }
#shortcuts-list li:last-child { border-bottom: none; }
#shortcuts-list .shortcut-info {
  font-size: 12px; font-weight: 700; color: var(--text-color-blue); }
#shortcuts-list .shortcut-actions button {
  margin-left: 8px; padding: 3px 10px; font-size: 12px; font-weight: 700; cursor: pointer; border-radius: 7px; background: var(--button-background-default); border: 1px solid var(--panel-border-color); color: var(--text-color-dark); box-shadow: var(--button-shadow-default); transition: all 0.2s ease-in-out; -webkit-tap-highlight-color: transparent; }
#shortcuts-list .shortcut-actions button:hover {
  background: var(--button-background-hover); box-shadow: var(--button-shadow-hover); }
#shortcuts-list .shortcut-actions .delete-btn {
  color: var(--danger-color); }
#shortcuts-list .shortcut-actions .edit-btn {
  color: var(--info-color); }
  
